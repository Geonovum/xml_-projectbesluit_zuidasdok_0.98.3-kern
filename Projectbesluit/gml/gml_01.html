<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head>
        <title>Accessible Map</title>
        <link rel="stylesheet" href="https://openlayers.org/en/v4.6.5/css/ol.css" type="text/css"/>
        <script type="application/javascript" src="https://openlayers.org/en/v4.6.5/build/ol.js"></script>
        <script type="text/javascript">
            function maakKaart(divIdMap, geojsonObject) {
            // Geldigheidsgebied van het tiling schema in RD-co√∂rdinaten:
            var projectionExtent = [-285401.92, 22598.08, 595401.9199999999, 903401.9199999999];
            var projection = new ol.proj.Projection({ code: 'EPSG:28992', units: 'm', extent: projectionExtent });
            // Resoluties (pixels per meter) van de zoomniveaus:
            var resolutions = [3440.640, 1720.320, 860.160, 430.080, 215.040, 107.520, 53.760, 26.880, 13.440, 6.720, 3.360, 1.680, 0.840, 0.420, 0.210];
            var size = ol.extent.getWidth(projectionExtent) / 256;
            // Er zijn 15 (0 tot 14) zoomniveaus beschikbaar van de WMTS-service voor de BRT-Achtergrondkaart:
            var matrixIds = new Array(15);
            [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15].map( function(idx) {
                matrixIds[idx] = 'EPSG:28992:' + idx;
            });
            var polygonStyle = new ol.style.Style({
                stroke: new ol.style.Stroke({
                    color: 'red',
                    width: 1
                }),
                fill: new ol.style.Fill({
                    color: 'rgba(0, 0, 255, 0.1)'
                })
            });
            var vectorSource = new ol.source.Vector({
                features: (new ol.format.GeoJSON()).readFeatures(geojsonObject)
            });
            var vectorLayer = new ol.layer.Vector({
                source: vectorSource,
                style: polygonStyle
            });
            var map = new ol.Map({
                target: divIdMap,
                layers: [
                    new ol.layer.Tile({
                        opacity: 0.7,
                        source: new ol.source.WMTS({
                            attributions: 'Kaartgegevens: (c) Kadaster',
                            url: 'https://geodata.nationaalgeoregister.nl/tiles/service/wmts?',
                            layer: 'brtachtergrondkaart',
                            matrixSet: 'EPSG:28992',
                            format: 'image/png',
                            projection: projection,
                            tileGrid: new ol.tilegrid.WMTS({
                                origin: ol.extent.getTopLeft(projectionExtent),
                                resolutions: resolutions,
                                matrixIds: matrixIds
                            }),
                            style: 'default',
                            wrapX: false
                        })
                    }),
                    vectorLayer
                ],
                controls: ol.control.defaults({
                    attributionOptions: {
                        collapsible: false
                    }
                }),
                view: new ol.View({
                    minZoom: 0,
                    maxZoom: 15,
                    projection: projection,
                    center: [150000, 450000],
                    zoom: 8
                })
            });
            var extent = vectorLayer.getSource().getExtent();
            map.getView().fit(extent);
            }
        </script>
    </head>
    <body>
        <div id="map" class="map"></div>
        <script type="text/javascript">
            var geojsonObject = {
                "type": "FeatureCollection",
                "name": "bouw_en_goothoogte",
                "crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:EPSG::28992" } },
                "features": [
                    { "type": "Feature", "properties": { "fid": "bouw_en_goothoogte.0", "gml_id": "NL.IMRO.0363.MP1348329798-00", "namespace": "NL.IMRO", "lokaalID": "0363.MP1348329798-00", "typePlanobject": "maatvoering", "naam": "maximum bouwhoogte (m)", "symboolCode": "s104", "hoek": 0, "waarde": 7, "waardeType": "maximum bouwhoogte (m)", "maatvoeringInfo_WaardeEnType_symboolCode": "s104" }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 120029.251, 483536.585 ], [ 120182.224, 483547.359 ], [ 120189.309, 483629.622 ], [ 120177.284, 483629.049 ], [ 120108.517, 483625.481 ], [ 120058.967, 483622.693 ], [ 120006.108, 483619.49 ], [ 119993.525, 483618.644 ], [ 119971.66, 483617.174 ], [ 119970.625, 483617.104 ], [ 119958.254, 483616.268 ], [ 119852.175, 483609.36 ], [ 119833.901, 483608.145 ], [ 119818.231, 483607.104 ], [ 119802.583, 483606.064 ], [ 119770.373, 483603.923 ], [ 119754.666, 483602.879 ], [ 119744.05, 483602.173 ], [ 119722.469, 483600.664 ], [ 119706.811, 483599.569 ], [ 119690.516, 483598.43 ], [ 119681.078, 483597.8 ], [ 119685.746, 483512.392 ], [ 119749.861, 483516.908 ], [ 119751.425, 483488.611 ], [ 119845.48, 483493.717 ], [ 119843.833, 483523.526 ], [ 119925.995, 483529.313 ], [ 119927.715, 483498.182 ], [ 120031.063, 483503.793 ], [ 120029.251, 483536.585 ] ] ] } },
                    { "type": "Feature", "properties": { "fid": "bouw_en_goothoogte.1", "gml_id": "NL.IMRO.0363.MP1308844806-00", "namespace": "NL.IMRO", "lokaalID": "0363.MP1308844806-00", "typePlanobject": "maatvoering", "naam": "maximum bouwhoogte (m)", "symboolCode": "s104", "hoek": 0, "waarde": 20, "waardeType": "maximum bouwhoogte (m)", "maatvoeringInfo_WaardeEnType_symboolCode": "s104" }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 119679.99, 483617.723 ], [ 119681.078, 483597.8 ], [ 119690.516, 483598.43 ], [ 119706.811, 483599.569 ], [ 119722.469, 483600.664 ], [ 119744.05, 483602.173 ], [ 119754.666, 483602.879 ], [ 119770.373, 483603.923 ], [ 119802.583, 483606.064 ], [ 119818.231, 483607.104 ], [ 119833.901, 483608.145 ], [ 119852.175, 483609.36 ], [ 119958.254, 483616.268 ], [ 119970.625, 483617.104 ], [ 119971.66, 483617.174 ], [ 119993.525, 483618.644 ], [ 120006.108, 483619.49 ], [ 120058.967, 483622.693 ], [ 120108.517, 483625.481 ], [ 120177.284, 483629.049 ], [ 120189.309, 483629.622 ], [ 120190.714, 483645.942 ], [ 119679.99, 483617.723 ] ] ] } }
                ]
            };
            maakKaart( 'map', geojsonObject )
        </script>
    </body>
</html>
